(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{1362:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},2559:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>i,TN:()=>c,XL:()=>d});var a=s(5155),r=s(2115),n=s(3101),l=s(5016);let o=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=r.forwardRef((e,t)=>{let{className:s,variant:r,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(o({variant:r}),s),...n})});i.displayName="Alert";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})});d.displayName="AlertTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",s),...r})});c.displayName="AlertDescription"},2924:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(5155),r=s(2115),n=s(8249),l=s(3209),o=s(7003),i=s(6170),d=s(9141),c=s(1362),m=s(8874),p=s(1847);let u=(0,p.A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),x=(0,p.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),h=(0,p.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var f=s(2559),g=s(8171);function j(){let{toast:e}=(0,g.dj)(),[t,s]=(0,r.useState)(""),[p,j]=(0,r.useState)(""),[v,N]=(0,r.useState)(""),[y,b]=(0,r.useState)("unconfigured"),[w,A]=(0,r.useState)(null),[k,C]=(0,r.useState)([]),[S,T]=(0,r.useState)(!1),[I,O]=(0,r.useState)(null),_=async()=>{if(!t)return void e({title:"API Key required",variant:"destructive"});b("testing"),A(null);try{let t=await fetch("/api/integrations/openphone"),a=await t.json();if(a.success){var s;b("connected"),C(a.phoneNumbers||[]),e({title:"Connected to OpenPhone",description:"Found ".concat((null==(s=a.phoneNumbers)?void 0:s.length)||0," phone numbers")})}else b("error"),A(a.error||"Connection failed"),e({title:"Connection failed",description:a.error,variant:"destructive"})}catch(t){b("error"),A("Failed to connect to OpenPhone API"),e({title:"Connection error",variant:"destructive"})}},P=async()=>{T(!0),O(null);try{let t=await fetch("/api/integrations/openphone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({daysBack:7})}),s=await t.json();s.success?(O({success:!0,count:s.callsImported}),e({title:"Import complete",description:"Imported ".concat(s.callsImported," calls")})):(O({success:!1,count:0}),e({title:"Import failed",description:s.error,variant:"destructive"}))}catch(t){O({success:!1,count:0}),e({title:"Import error",variant:"destructive"})}finally{T(!1)}},R="".concat(window.location.origin,"/api/integrations/openphone/webhook");return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(n.b,{title:"Settings"}),(0,a.jsxs)("div",{className:"flex-1 p-6 max-w-3xl",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Settings"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Configure your OpenPhone integration"})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-5 w-5"}),"OpenPhone Integration"]}),(0,a.jsx)(l.BT,{children:"Connect your OpenPhone account to automatically import call recordings and transcripts."})]}),(0,a.jsxs)(l.Wu,{className:"space-y-6",children:["connected"===y&&(0,a.jsxs)(f.Fc,{className:"border-green-200 bg-green-50",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)(f.XL,{className:"text-green-800",children:"Connected"}),(0,a.jsx)(f.TN,{className:"text-green-700",children:"OpenPhone integration is active. Call data will sync automatically."})]}),"error"===y&&w&&(0,a.jsxs)(f.Fc,{variant:"destructive",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)(f.XL,{children:"Connection Error"}),(0,a.jsx)(f.TN,{children:w})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"API Key"}),(0,a.jsx)(i.p,{type:"password",placeholder:"Enter your OpenPhone API key",value:t,onChange:e=>s(e.target.value)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Get your API key from"," ",(0,a.jsxs)("a",{href:"https://app.openphone.com/settings/api",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline inline-flex items-center gap-1",children:["OpenPhone Settings ",(0,a.jsx)(u,{className:"h-3 w-3"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Phone Number ID"}),k.length>0?(0,a.jsxs)("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:p,onChange:e=>j(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select a phone number"}),k.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.phoneNumber," ",e.name?"(".concat(e.name,")"):""]},e.id))]}):(0,a.jsx)(i.p,{placeholder:"Test connection to load phone numbers",value:p,onChange:e=>j(e.target.value)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Webhook Signing Secret"}),(0,a.jsx)(i.p,{type:"password",placeholder:"Base64 signing key from webhook configuration",value:v,onChange:e=>N(e.target.value)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Webhook URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.p,{readOnly:!0,value:R,className:"bg-muted font-mono text-xs"}),(0,a.jsx)(o.$,{variant:"outline",className:"bg-transparent",onClick:()=>{navigator.clipboard.writeText(R),e({title:"Copied to clipboard"})},children:"Copy"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Add this URL to your OpenPhone webhook configuration. Subscribe to: call.completed, call.recording.completed, call.transcript.completed"})]}),(0,a.jsx)("div",{className:"flex gap-2 pt-4",children:(0,a.jsx)(o.$,{onClick:_,disabled:"testing"===y||!t,children:"testing"===y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{className:"mr-2 h-4 w-4 animate-spin"}),"Testing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Test Connection"]})})})]}),"connected"===y&&(0,a.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Import Historical Calls"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Import call recordings and transcripts from the last 7 days."}),I&&(0,a.jsx)(f.Fc,{className:I.success?"border-green-200 bg-green-50 mb-4":"mb-4",variant:I.success?"default":"destructive",children:I.success?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)(f.XL,{className:"text-green-800",children:"Import Complete"}),(0,a.jsxs)(f.TN,{className:"text-green-700",children:["Successfully imported ",I.count," calls."]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)(f.XL,{children:"Import Failed"}),(0,a.jsx)(f.TN,{children:"Could not import calls. Please try again."})]})}),(0,a.jsx)(o.$,{variant:"outline",className:"bg-transparent",onClick:P,disabled:S,children:S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{className:"mr-2 h-4 w-4"}),"Import Last 7 Days"]})})]})]})]})]})]})}},3209:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>l,aR:()=>o});var a=s(5155),r=s(2115),n=s(5016);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});l.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});o.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});i.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},5407:(e,t,s)=>{Promise.resolve().then(s.bind(s,2924))},8171:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var a=s(2115);let r=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=[],i={toasts:[]};function d(e){i=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(i,e),o.forEach(e=>{e(i)})}function c(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(i);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},8249:(e,t,s)=>{"use strict";s.d(t,{b:()=>y});var a=s(5155),r=s(2115),n=s(6651),l=s(6170),o=s(7003),i=s(3884),d=s(5736),c=s(7937),m=s(5917),p=s(9051),u=s(5016);let x=d.bL,h=d.l9;d.YJ,d.ZL,d.Pb,d.z6,r.forwardRef((e,t)=>{let{className:s,inset:r,children:n,...l}=e;return(0,a.jsxs)(d.ZP,{ref:t,className:(0,u.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...l,children:[n,(0,a.jsx)(c.A,{className:"ml-auto"})]})}).displayName=d.ZP.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(d.G5,{ref:t,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=d.G5.displayName;let f=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...n}=e;return(0,a.jsx)(d.ZL,{children:(0,a.jsx)(d.UC,{ref:t,sideOffset:r,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});f.displayName=d.UC.displayName;let g=r.forwardRef((e,t)=>{let{className:s,inset:r,...n}=e;return(0,a.jsx)(d.q7,{ref:t,className:(0,u.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...n})});g.displayName=d.q7.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,checked:n,...l}=e;return(0,a.jsxs)(d.H_,{ref:t,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(d.VF,{children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})}),r]})}).displayName=d.H_.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(d.hN,{ref:t,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(d.VF,{children:(0,a.jsx)(p.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=d.hN.displayName;let j=r.forwardRef((e,t)=>{let{className:s,inset:r,...n}=e;return(0,a.jsx)(d.JU,{ref:t,className:(0,u.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...n})});j.displayName=d.JU.displayName;let v=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(d.wv,{ref:t,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",s),...r})});v.displayName=d.wv.displayName;var N=s(3892);function y(e){let{title:t,showSearch:s=!1,searchPlaceholder:r="Search...",onSearchChange:d,actions:c}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b bg-background",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(N.x2,{className:"md:hidden"}),(0,a.jsx)("h1",{className:"text-2xl font-bold",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[s&&(0,a.jsxs)("div",{className:"relative max-w-sm",children:[(0,a.jsx)(n.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,a.jsx)(l.p,{placeholder:r,className:"pl-10 w-64",onChange:e=>null==d?void 0:d(e.target.value)})]}),c,(0,a.jsxs)(x,{children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)(o.$,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:(0,a.jsxs)(i.eu,{className:"h-8 w-8",children:[(0,a.jsx)(i.BK,{src:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",alt:"John Doe",className:"object-cover"}),(0,a.jsx)(i.q5,{children:"JD"})]})})}),(0,a.jsxs)(f,{align:"end",children:[(0,a.jsx)(j,{children:"My Account"}),(0,a.jsx)(v,{}),(0,a.jsx)(g,{children:"Profile"}),(0,a.jsx)(g,{children:"Settings"}),(0,a.jsx)(v,{}),(0,a.jsx)(g,{children:"Log out"})]})]})]})]})}},8874:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},9141:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])}},e=>{e.O(0,[142,728,745,441,255,358],()=>e(e.s=5407)),_N_E=e.O()}]);