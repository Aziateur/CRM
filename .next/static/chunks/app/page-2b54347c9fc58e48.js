(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4182:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Y});var a=t(5155),n=t(2115),l=t(8249),r=t(7003),c=t(7812),i=t(5016);let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,i.cn)("w-full caption-bottom text-sm",t),...n})})});d.displayName="Table";let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("thead",{ref:s,className:(0,i.cn)("[&_tr]:border-b",t),...n})});o.displayName="TableHeader";let m=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,i.cn)("[&_tr:last-child]:border-0",t),...n})});m.displayName="TableBody",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n})}).displayName="TableFooter";let x=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tr",{ref:s,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n})});x.displayName="TableRow";let h=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("th",{ref:s,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...n})});h.displayName="TableHead";let u=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("td",{ref:s,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...n})});u.displayName="TableCell",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("caption",{ref:s,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",t),...n})}).displayName="TableCaption";var p=t(7507),j=t(4679),f=t(1856),g=t(8609),N=t(4033);let v=g.bL,b=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(g.q7,{ref:s,className:(0,i.cn)("border-b",t),...n})});b.displayName="AccordionItem";let y=n.forwardRef((e,s)=>{let{className:t,children:n,...l}=e;return(0,a.jsx)(g.Y9,{className:"flex",children:(0,a.jsxs)(g.l9,{ref:s,className:(0,i.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...l,children:[n,(0,a.jsx)(N.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});y.displayName=g.l9.displayName;let w=n.forwardRef((e,s)=>{let{className:t,children:n,...l}=e;return(0,a.jsx)(g.UC,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,a.jsx)("div",{className:(0,i.cn)("pb-4 pt-0",t),children:n})})});w.displayName=g.UC.displayName;var C=t(2180),k=t(3209),A=t(6170),S=t(235),O=t(7001),F=t(7346),M=t(4664),D=t(6191),R=t(9141),L=t(6046),$=t(799),z=t(9142),E=t(9715),J=t(814),T=t(21),Q=t(5229),W=t(6132),Z=t(9347),q=t(1360),I=t(7937),U=t(4824);function B(e){let s=new Date,t=new Date(e),a=Math.floor((s.getTime()-t.getTime())/36e5),n=Math.floor(a/24);return a<1?"Just now":a<24?"".concat(a,"h ago"):1===n?"1 day ago":"".concat(n," days ago")}let V=e=>({"No connect":"bg-muted text-muted-foreground","Gatekeeper only":"bg-orange-100 text-orange-800","DM reached → No interest":"bg-red-100 text-red-800","DM reached → Some interest":"bg-blue-100 text-blue-800","Meeting set":"bg-green-100 text-green-800"})[e]||"bg-muted text-muted-foreground",_=["Confirm","Disqualify","Book","Identify","Test"];function Y(){var e,s,t;let[i,g]=(0,n.useState)(U.ac),[N,Y]=(0,n.useState)(U.r2),[G,P]=(0,n.useState)("all"),[H,K]=(0,n.useState)("all"),[X,ee]=(0,n.useState)(""),[es,et]=(0,n.useState)(!1),[ea,en]=(0,n.useState)({company:"",phone:"",segment:"Unknown"}),[el,er]=(0,n.useState)(null),[ec,ei]=(0,n.useState)(!1),[ed,eo]=(0,n.useState)(!1),[em,ex]=(0,n.useState)(null),[eh,eu]=(0,n.useState)(null),[ep,ej]=(0,n.useState)(!1),[ef,eg]=(0,n.useState)(""),[eN,ev]=(0,n.useState)("fact"),[eb,ey]=(0,n.useState)(!1),[ew,eC]=(0,n.useState)({outcome:null,why:null,repMistake:null,note:""}),[ek,eA]=(0,n.useState)(!1),[eS,eO]=(0,n.useState)({name:"",phone:"",role:"Other"}),eF=(0,n.useMemo)(()=>i.map(e=>{let s=N.filter(s=>s.leadId===e.id).sort((e,s)=>new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime());return{...e,derivedStage:(0,U.Is)(s),derivedStatus:(0,U.OV)(s),lastAttempt:s[0]||null,attemptCount:s.length}}),[i,N]).filter(e=>{var s;let t="all"===G||e.segment===G,a="all"===H||(null==(s=e.lastAttempt)?void 0:s.outcome)===H,n=e.company.toLowerCase().includes(X.toLowerCase());return t&&a&&n}),eM=el?N.filter(e=>e.leadId===el.id).sort((e,s)=>new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime()):[],eD=eM[0]||null,eR="DM reached → No interest"===ew.outcome,eL=null!=em&&!!em.nextCallObjective&&_.some(e=>{var s;return null==(s=em.nextCallObjective)?void 0:s.startsWith(e)});return(0,a.jsx)(C.Bc,{children:(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(l.b,{title:"Leads",showSearch:!0,searchPlaceholder:"Search companies...",onSearchChange:ee,actions:(0,a.jsxs)(j.lG,{open:es,onOpenChange:et,children:[(0,a.jsx)(j.zM,{asChild:!0,children:(0,a.jsxs)(r.$,{children:[(0,a.jsx)(D.A,{className:"mr-2 h-4 w-4"}),"Add Lead"]})}),(0,a.jsxs)(j.Cf,{children:[(0,a.jsxs)(j.c7,{children:[(0,a.jsx)(j.L3,{children:"Add New Lead"}),(0,a.jsx)(j.rr,{children:"Enter basic lead info. Details can be added later."})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(S.J,{htmlFor:"company",children:"Company *"}),(0,a.jsx)(A.p,{id:"company",value:ea.company,onChange:e=>en({...ea,company:e.target.value}),placeholder:"Enter company name"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(S.J,{htmlFor:"phone",children:"Phone"}),(0,a.jsx)(A.p,{id:"phone",value:ea.phone,onChange:e=>en({...ea,phone:e.target.value}),placeholder:"+1 555-0100"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(S.J,{children:"Segment"}),(0,a.jsxs)(p.l6,{value:ea.segment,onValueChange:e=>en({...ea,segment:e}),children:[(0,a.jsx)(p.bq,{children:(0,a.jsx)(p.yv,{placeholder:"Select segment"})}),(0,a.jsx)(p.gC,{children:U.yi.map(e=>(0,a.jsx)(p.eb,{value:e,children:e},e))})]})]})]}),(0,a.jsxs)(j.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",className:"bg-transparent",onClick:()=>et(!1),children:"Cancel"}),(0,a.jsx)(r.$,{onClick:()=>{ea.company&&(g([{id:"lead-".concat(Date.now()),company:ea.company,phone:ea.phone||void 0,segment:ea.segment,isDecisionMaker:"unknown",isFleetOwner:"unknown",contacts:[],createdAt:new Date().toISOString().split("T")[0]},...i]),en({company:"",phone:"",segment:"Unknown"}),et(!1))},disabled:!ea.company,children:"Add Lead"})]})]})]})}),(0,a.jsxs)("div",{className:"flex-1 p-6",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 mb-6",children:[(0,a.jsxs)(p.l6,{value:G,onValueChange:P,children:[(0,a.jsx)(p.bq,{className:"w-36",children:(0,a.jsx)(p.yv,{placeholder:"Segment"})}),(0,a.jsxs)(p.gC,{children:[(0,a.jsx)(p.eb,{value:"all",children:"All Segments"}),U.yi.map(e=>(0,a.jsx)(p.eb,{value:e,children:e},e))]})]}),(0,a.jsxs)(p.l6,{value:H,onValueChange:K,children:[(0,a.jsx)(p.bq,{className:"w-48",children:(0,a.jsx)(p.yv,{placeholder:"Last Outcome"})}),(0,a.jsxs)(p.gC,{children:[(0,a.jsx)(p.eb,{value:"all",children:"All Outcomes"}),U.o1.map(e=>(0,a.jsx)(p.eb,{value:e,children:e},e))]})]})]}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(d,{children:[(0,a.jsx)(o,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(h,{className:"w-[200px]",children:"Company"}),(0,a.jsx)(h,{className:"w-[140px]",children:"Phone"}),(0,a.jsx)(h,{children:"Segment"}),(0,a.jsx)(h,{children:"Last Outcome"}),(0,a.jsx)(h,{children:"Next Action"})]})}),(0,a.jsx)(m,{children:eF.map(e=>(0,a.jsxs)(x,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>{er(e),ex({...e}),ei(!0),eo(!1)},children:[(0,a.jsx)(u,{className:"font-medium",children:e.company}),(0,a.jsx)(u,{children:e.phone?(0,a.jsxs)("a",{href:"tel:".concat(e.phone),className:"flex items-center gap-1 text-primary hover:underline",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)(R.A,{className:"h-3 w-3"}),e.phone]}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,a.jsx)(u,{children:(0,a.jsx)(c.E,{variant:"outline",children:e.segment})}),(0,a.jsx)(u,{children:e.lastAttempt?(0,a.jsx)(c.E,{className:V(e.lastAttempt.outcome),variant:"secondary",children:e.lastAttempt.outcome}):(0,a.jsx)(c.E,{variant:"outline",className:"text-muted-foreground",children:"New"})}),(0,a.jsx)(u,{children:e.lastAttempt?(0,a.jsx)("span",{className:"text-sm",children:e.lastAttempt.nextAction}):(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Call"})})]},e.id))})]})}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-4",children:["Showing ",eF.length," of ",i.length," leads"]})]}),(0,a.jsx)(j.lG,{open:null!==eh,onOpenChange:e=>{e||(eu(null),ej(!1))},children:(0,a.jsxs)(j.Cf,{className:"max-w-2xl",children:[(0,a.jsxs)(j.c7,{children:[(0,a.jsx)(j.L3,{children:"Attempt Details"}),(0,a.jsx)(j.rr,{children:eh&&new Date(eh.timestamp).toLocaleString()})]}),eh&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)(c.E,{className:V(eh.outcome),variant:"secondary",children:eh.outcome}),eh.why&&(0,a.jsxs)(c.E,{variant:"outline",children:["Why: ",eh.why]}),eh.repMistake&&(0,a.jsxs)(c.E,{variant:"outline",className:"text-red-600",children:["Mistake: ",eh.repMistake]})]}),eh.note&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground italic",children:eh.note}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Next action: ",eh.nextAction]}),eh.recordingUrl&&(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)(S.J,{className:"text-xs text-muted-foreground",children:"Recording"}),(0,a.jsx)("audio",{controls:!0,className:"w-full mt-1",src:eh.recordingUrl,children:(0,a.jsx)("track",{kind:"captions"})})]}),eh.transcript&&eh.transcript.length>0&&(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)(S.J,{className:"text-xs text-muted-foreground",children:"Transcript"}),(0,a.jsx)(F.F,{className:"h-48 mt-1 border rounded p-2",children:eh.transcript.map((e,s)=>(0,a.jsxs)("div",{className:"p-2 mb-1 rounded text-sm ".concat("agent"===e.speaker?"bg-primary/10 ml-4":"bg-muted mr-4"),children:[(0,a.jsxs)("span",{className:"text-xs font-medium capitalize",children:["agent"===e.speaker?"You":"Contact",": "]}),e.content]},s))})]}),(0,a.jsx)(M.w,{}),ep?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Add to Account Reality"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(r.$,{size:"sm",variant:"fact"===eN?"default":"outline",className:"fact"===eN?"":"bg-transparent",onClick:()=>ev("fact"),children:"Confirmed Fact"}),(0,a.jsx)(r.$,{size:"sm",variant:"question"===eN?"default":"outline",className:"question"===eN?"":"bg-transparent",onClick:()=>ev("question"),children:"Open Question"})]}),(0,a.jsx)(A.p,{value:ef,onChange:e=>eg(e.target.value),placeholder:"fact"===eN?"Enter confirmed fact (max 120 chars)":"Do they... / Can they... / Will they...",maxLength:120}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(r.$,{onClick:()=>{if(em&&ef.trim()){if("fact"===eN){let e=em.confirmedFacts||[];if(e.length>=5)return;ex({...em,confirmedFacts:[...e,ef.slice(0,120)]})}else{let e=em.openQuestions||[];if(e.length>=3)return;ex({...em,openQuestions:[...e,ef.slice(0,120)]})}if(eg(""),ej(!1),eu(null),em){let e="fact"===eN?{...em,confirmedFacts:[...em.confirmedFacts||[],ef.slice(0,120)]}:{...em,openQuestions:[...em.openQuestions||[],ef.slice(0,120)]};g(i.map(s=>s.id===e.id?e:s)),er(e),ex(e)}}},disabled:!ef.trim(),children:"Add"}),(0,a.jsx)(r.$,{variant:"ghost",onClick:()=>ej(!1),children:"Cancel"})]})]}):(0,a.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-3",children:"Did this attempt change our understanding?"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(r.$,{variant:"outline",className:"bg-transparent",onClick:()=>ej(!0),children:"Yes - Add to Account Reality"}),(0,a.jsx)(r.$,{variant:"ghost",onClick:()=>eu(null),children:"No - Close"})]})]})]})]})}),(0,a.jsx)(j.lG,{open:eb,onOpenChange:ey,children:(0,a.jsxs)(j.Cf,{children:[(0,a.jsxs)(j.c7,{children:[(0,a.jsx)(j.L3,{children:"Log Attempt"}),(0,a.jsx)(j.rr,{children:null==el?void 0:el.company})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{children:"Outcome *"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2",children:U.o1.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>eC({...ew,outcome:e,why:null}),className:"px-3 py-2 rounded-lg border text-left transition-colors ".concat(ew.outcome===e?"".concat(V(e)," border-2"):"border-border hover:bg-muted"),children:e},e))})]}),eR&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{children:"Why? *"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:U.b1.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>eC({...ew,why:e}),className:"px-3 py-2 rounded-lg border text-sm transition-colors ".concat(ew.why===e?"border-primary bg-primary/10 font-medium":"border-border hover:bg-muted"),children:e},e))})]}),ew.outcome&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{className:"text-muted-foreground",children:"Rep Mistake? (optional)"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:U.m5.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>eC({...ew,repMistake:ew.repMistake===e?null:e}),className:"px-3 py-2 rounded-lg border text-sm transition-colors ".concat(ew.repMistake===e?"border-red-500 bg-red-50 font-medium":"border-border hover:bg-muted"),children:e},e))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{className:"text-muted-foreground",children:"Note (optional)"}),(0,a.jsx)(A.p,{value:ew.note,onChange:e=>eC({...ew,note:e.target.value}),placeholder:"Brief note (max 120 chars)",maxLength:120})]})]}),(0,a.jsxs)(j.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",className:"bg-transparent",onClick:()=>ey(!1),children:"Cancel"}),(0,a.jsx)(r.$,{onClick:()=>{el&&ew.outcome&&(Y([{id:"att-".concat(Date.now()),leadId:el.id,timestamp:new Date().toISOString(),outcome:ew.outcome,why:ew.why||void 0,repMistake:ew.repMistake||void 0,dmReached:(0,U.cX)(ew.outcome),nextAction:(0,U.vE)(ew.outcome,ew.why||void 0),note:ew.note||void 0,durationSec:0,createdAt:new Date().toISOString().split("T")[0]},...N]),eC({outcome:null,why:null,repMistake:null,note:""}),ey(!1))},disabled:!ew.outcome||eR&&!ew.why,children:"Save Attempt"})]})]})}),(0,a.jsx)(j.lG,{open:ek,onOpenChange:eA,children:(0,a.jsxs)(j.Cf,{children:[(0,a.jsx)(j.c7,{children:(0,a.jsx)(j.L3,{children:"Add Contact"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{children:"Name *"}),(0,a.jsx)(A.p,{value:eS.name,onChange:e=>eO({...eS,name:e.target.value}),placeholder:"Contact name"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{children:"Phone"}),(0,a.jsx)(A.p,{value:eS.phone,onChange:e=>eO({...eS,phone:e.target.value}),placeholder:"+1 555-0100"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{children:"Role"}),(0,a.jsx)("div",{className:"flex gap-2",children:U.vw.map(e=>(0,a.jsx)(r.$,{type:"button",variant:eS.role===e?"default":"outline",className:eS.role===e?"":"bg-transparent",size:"sm",onClick:()=>eO({...eS,role:e}),children:e},e))})]})]}),(0,a.jsxs)(j.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",className:"bg-transparent",onClick:()=>eA(!1),children:"Cancel"}),(0,a.jsx)(r.$,{onClick:()=>{if(!em||!eS.name)return;let e={id:"c-".concat(Date.now()),name:eS.name,phone:eS.phone||void 0,role:eS.role};ex({...em,contacts:[...em.contacts,e]}),eO({name:"",phone:"",role:"Other"}),eA(!1)},disabled:!eS.name,children:"Add Contact"})]})]})}),(0,a.jsx)(f.cj,{open:ec,onOpenChange:ei,children:(0,a.jsx)(f.h,{className:"w-full sm:max-w-xl p-0 flex flex-col",children:el&&em&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"sticky top-0 z-10 bg-background border-b px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:el.company}),(0,a.jsx)(c.E,{variant:"outline",className:"mt-1",children:el.segment})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[el.phone&&(0,a.jsx)(r.$,{asChild:!0,variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",children:(0,a.jsxs)("a",{href:"tel:".concat(el.phone),children:[(0,a.jsx)(R.A,{className:"h-4 w-4 mr-1"}),"Call"]})}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",className:"bg-transparent",onClick:()=>ey(!0),children:"Log Attempt"}),ed?(0,a.jsxs)(r.$,{size:"sm",onClick:()=>{em&&(g(i.map(e=>e.id===em.id?em:e)),er(em),eo(!1))},children:[(0,a.jsx)(L.A,{className:"h-4 w-4 mr-1"}),"Save"]}):(0,a.jsxs)(r.$,{size:"sm",variant:"outline",className:"bg-transparent",onClick:()=>eo(!0),children:[(0,a.jsx)($.A,{className:"h-4 w-4 mr-1"}),"Edit"]})]})]})}),(0,a.jsx)(F.F,{className:"flex-1",children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[eD?(0,a.jsxs)(k.Zp,{className:"bg-muted/30",children:[(0,a.jsx)(k.aR,{className:"pb-2",children:(0,a.jsx)(k.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Last Attempt"})}),(0,a.jsx)(k.Wu,{className:"pt-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)(c.E,{className:V(eD.outcome),variant:"secondary",children:eD.outcome}),eD.why&&(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Why: ",eD.why]}),eD.repMistake&&(0,a.jsxs)("span",{className:"text-sm text-red-600",children:["Mistake: ",eD.repMistake]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[eD.recordingUrl&&(0,a.jsx)(z.A,{className:"h-4 w-4 text-muted-foreground"}),eD.transcript&&eD.transcript.length>0&&(0,a.jsx)(E.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:B(eD.timestamp)})]})]})})]}):(0,a.jsx)(k.Zp,{className:"bg-muted/30",children:(0,a.jsx)(k.Wu,{className:"py-4",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"No attempts yet"})})}),(0,a.jsxs)(k.Zp,{className:em.nextCallObjective?"":"border-amber-500",children:[(0,a.jsx)(k.aR,{className:"pb-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(k.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(J.A,{className:"h-5 w-5 text-primary"}),"Account Reality"]}),(0,a.jsxs)(C.m_,{children:[(0,a.jsx)(C.k$,{children:(0,a.jsx)(T.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsx)(C.ZI,{className:"max-w-xs",children:(0,a.jsx)("p",{children:"The single source of truth about this account. Only facts you would bet money on."})})]})]})}),(0,a.jsxs)(k.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(S.J,{className:"text-sm font-medium",children:"Confirmed Facts"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[(em.confirmedFacts||[]).length,"/5"]})]}),ed?(0,a.jsxs)("div",{className:"space-y-2",children:[(em.confirmedFacts||[]).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"•"}),(0,a.jsx)(A.p,{value:e,onChange:e=>{let t=[...em.confirmedFacts||[]];t[s]=e.target.value.slice(0,120),ex({...em,confirmedFacts:t})},maxLength:120,className:"flex-1"}),(0,a.jsx)(r.$,{size:"icon",variant:"ghost",onClick:()=>(e=>{if(!em)return;let s=[...em.confirmedFacts||[]];s.splice(e,1),ex({...em,confirmedFacts:s})})(s),children:(0,a.jsx)(Q.A,{className:"h-4 w-4"})})]},s)),(em.confirmedFacts||[]).length<5&&(0,a.jsxs)(r.$,{size:"sm",variant:"outline",className:"bg-transparent",onClick:()=>{ex({...em,confirmedFacts:[...em.confirmedFacts||[],""]})},children:[(0,a.jsx)(D.A,{className:"h-4 w-4 mr-1"}),"Add Fact"]})]}):(0,a.jsx)("ul",{className:"space-y-1",children:(em.confirmedFacts||[]).length>0?null==(e=em.confirmedFacts)?void 0:e.map((e,s)=>(0,a.jsxs)("li",{className:"text-sm flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"•"}),(0,a.jsx)("span",{children:e})]},s)):(0,a.jsx)("li",{className:"text-sm text-muted-foreground italic",children:"No confirmed facts yet"})})]}),(0,a.jsx)(M.w,{}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(S.J,{className:"text-sm font-medium",children:"Open Questions"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[(em.openQuestions||[]).length,"/3"]})]}),ed?(0,a.jsxs)("div",{className:"space-y-2",children:[(em.openQuestions||[]).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"•"}),(0,a.jsx)(A.p,{value:e,onChange:e=>{let t=[...em.openQuestions||[]];t[s]=e.target.value.slice(0,120),ex({...em,openQuestions:t})},placeholder:"Do they... / Can they... / Will they...",maxLength:120,className:"flex-1"}),(0,a.jsx)(r.$,{size:"icon",variant:"ghost",onClick:()=>(e=>{if(!em)return;let s=[...em.openQuestions||[]];s.splice(e,1),ex({...em,openQuestions:s})})(s),children:(0,a.jsx)(Q.A,{className:"h-4 w-4"})})]},s)),(em.openQuestions||[]).length<3&&(0,a.jsxs)(r.$,{size:"sm",variant:"outline",className:"bg-transparent",onClick:()=>{ex({...em,openQuestions:[...em.openQuestions||[],""]})},children:[(0,a.jsx)(D.A,{className:"h-4 w-4 mr-1"}),"Add Question"]})]}):(0,a.jsx)("ul",{className:"space-y-1",children:(em.openQuestions||[]).length>0?null==(s=em.openQuestions)?void 0:s.map((e,s)=>(0,a.jsxs)("li",{className:"text-sm flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"•"}),(0,a.jsx)("span",{children:e})]},s)):(0,a.jsx)("li",{className:"text-sm text-muted-foreground italic",children:"No open questions yet"})})]}),(0,a.jsx)(M.w,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsxs)(S.J,{className:"text-sm font-medium flex items-center gap-2",children:["Next Call Objective",!em.nextCallObjective&&(0,a.jsx)(W.A,{className:"h-4 w-4 text-amber-500"})]})}),ed?(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(A.p,{value:em.nextCallObjective||"",onChange:e=>ex({...em,nextCallObjective:e.target.value}),placeholder:"Confirm whether fuel contracts renew quarterly or annually.",className:!eL&&em.nextCallObjective?"border-amber-500":""}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Must start with: Confirm, Disqualify, Book, Identify, or Test"})]}):(0,a.jsx)("p",{className:"text-sm ".concat(em.nextCallObjective?"":"text-amber-500 italic"),children:em.nextCallObjective||"No objective set - click Edit to add one"})]})]})]}),(0,a.jsxs)(k.Zp,{children:[(0,a.jsx)(k.aR,{className:"pb-2",children:(0,a.jsx)(k.ZB,{className:"text-sm font-medium",children:"Lead Info"})}),(0,a.jsxs)(k.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-xs text-muted-foreground",children:"Segment"}),ed?(0,a.jsxs)(p.l6,{value:em.segment,onValueChange:e=>ex({...em,segment:e}),children:[(0,a.jsx)(p.bq,{className:"mt-1",children:(0,a.jsx)(p.yv,{})}),(0,a.jsx)(p.gC,{children:U.yi.map(e=>(0,a.jsx)(p.eb,{value:e,children:e},e))})]}):(0,a.jsx)("p",{className:"text-sm mt-1",children:em.segment})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-xs text-muted-foreground",children:"Decision Maker?"}),ed?(0,a.jsx)("div",{className:"flex gap-1 mt-1",children:["yes","no","unknown"].map(e=>(0,a.jsx)(r.$,{type:"button",size:"sm",variant:em.isDecisionMaker===e?"default":"outline",className:em.isDecisionMaker===e?"":"bg-transparent",onClick:()=>ex({...em,isDecisionMaker:e}),children:"yes"===e?"Yes":"no"===e?"No":"?"},e))}):(0,a.jsx)("p",{className:"text-sm mt-1 capitalize",children:em.isDecisionMaker||"Unknown"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-xs text-muted-foreground",children:"Fleet Owner?"}),ed?(0,a.jsx)("div",{className:"flex gap-1 mt-1",children:["yes","no","unknown"].map(e=>(0,a.jsx)(r.$,{type:"button",size:"sm",variant:em.isFleetOwner===e?"default":"outline",className:em.isFleetOwner===e?"":"bg-transparent",onClick:()=>ex({...em,isFleetOwner:e}),children:"yes"===e?"Yes":"no"===e?"No":"?"},e))}):(0,a.jsx)("p",{className:"text-sm mt-1 capitalize",children:em.isFleetOwner||"Unknown"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-xs text-muted-foreground",children:"Operational Context"}),ed?(0,a.jsx)(O.T,{value:em.operationalContext||"",onChange:e=>ex({...em,operationalContext:e.target.value}),placeholder:"Facts about their operating environment, not opinions.",className:"mt-1",rows:2}):(0,a.jsx)("p",{className:"text-sm mt-1 text-muted-foreground",children:em.operationalContext||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-xs text-muted-foreground",children:"Constraints"}),ed?(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:U.YN.map(e=>(0,a.jsx)(c.E,{variant:(em.constraints||[]).includes(e)?"default":"outline",className:"cursor-pointer",onClick:()=>(e=>{if(!em)return;let s=em.constraints||[];s.includes(e)?ex({...em,constraints:s.filter(s=>s!==e)}):ex({...em,constraints:[...s,e]})})(e),children:e},e))}):(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:(em.constraints||[]).length>0?null==(t=em.constraints)?void 0:t.map(e=>(0,a.jsx)(c.E,{variant:"secondary",children:e},e)):(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"-"})}),ed&&(0,a.jsx)(A.p,{value:em.constraintOther||"",onChange:e=>ex({...em,constraintOther:e.target.value}),placeholder:"Other constraint...",className:"mt-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-xs text-muted-foreground",children:"Opportunity Angle"}),ed?(0,a.jsx)(A.p,{value:em.opportunityAngle||"",onChange:e=>ex({...em,opportunityAngle:e.target.value.slice(0,100)}),placeholder:"One-sentence reason this product could matter to them.",className:"mt-1",maxLength:100}):(0,a.jsx)("p",{className:"text-sm mt-1 text-muted-foreground",children:em.opportunityAngle||"-"})]}),(0,a.jsx)(v,{type:"single",collapsible:!0,className:"w-full",children:(0,a.jsxs)(b,{value:"advanced",className:"border-none",children:[(0,a.jsx)(y,{className:"text-xs text-muted-foreground py-2",children:"Advanced"}),(0,a.jsx)(w,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-xs text-muted-foreground",children:"Website"}),ed?(0,a.jsx)(A.p,{value:em.website||"",onChange:e=>ex({...em,website:e.target.value}),className:"mt-1"}):(0,a.jsx)("p",{className:"text-sm mt-1",children:em.website||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-xs text-muted-foreground",children:"Email"}),ed?(0,a.jsx)(A.p,{value:em.email||"",onChange:e=>ex({...em,email:e.target.value}),className:"mt-1"}):(0,a.jsx)("p",{className:"text-sm mt-1",children:em.email||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-xs text-muted-foreground",children:"Address"}),ed?(0,a.jsx)(A.p,{value:em.address||"",onChange:e=>ex({...em,address:e.target.value}),className:"mt-1"}):(0,a.jsx)("p",{className:"text-sm mt-1",children:em.address||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-xs text-muted-foreground",children:"Lead Source"}),ed?(0,a.jsx)(A.p,{value:em.leadSource||"",onChange:e=>ex({...em,leadSource:e.target.value}),className:"mt-1"}):(0,a.jsx)("p",{className:"text-sm mt-1",children:em.leadSource||"-"})]})]})})]})})]})]}),(0,a.jsxs)(k.Zp,{children:[(0,a.jsx)(k.aR,{className:"pb-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(k.ZB,{className:"text-sm font-medium",children:"Contacts"}),ed&&(0,a.jsxs)(r.$,{size:"sm",variant:"outline",className:"bg-transparent",onClick:()=>eA(!0),children:[(0,a.jsx)(D.A,{className:"h-4 w-4 mr-1"}),"Add"]})]})}),(0,a.jsx)(k.Wu,{children:em.contacts.length>0?(0,a.jsx)("div",{className:"space-y-2",children:em.contacts.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(r.$,{size:"icon",variant:"ghost",className:0===s?"text-amber-500":"text-muted-foreground",onClick:()=>ed&&(e=>{if(!em)return;let s=em.contacts.find(s=>s.id===e);s&&ex({...em,contacts:[s,...em.contacts.filter(s=>s.id!==e)]})})(e.id),disabled:!ed,children:(0,a.jsx)(Z.A,{className:"h-4 w-4 ".concat(0===s?"fill-current":"")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.name}),e.phone&&(0,a.jsx)("a",{href:"tel:".concat(e.phone),className:"text-xs text-primary hover:underline",children:e.phone})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[ed?(0,a.jsx)("div",{className:"flex gap-1",children:U.vw.map(t=>(0,a.jsx)(r.$,{size:"sm",variant:e.role===t?"default":"outline",className:e.role===t?"":"bg-transparent",onClick:()=>{let a=[...em.contacts];a[s]={...e,role:t},ex({...em,contacts:a})},children:t},t))}):(0,a.jsx)(c.E,{variant:"outline",children:e.role}),ed&&(0,a.jsx)(r.$,{size:"icon",variant:"ghost",className:"text-muted-foreground hover:text-red-600",onClick:()=>{var s;return s=e.id,void(em&&ex({...em,contacts:em.contacts.filter(e=>e.id!==s)}))},children:(0,a.jsx)(q.A,{className:"h-4 w-4"})})]})]},e.id))}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center py-2",children:"No contacts yet"})})]}),(0,a.jsxs)(k.Zp,{children:[(0,a.jsx)(k.aR,{className:"pb-2",children:(0,a.jsxs)(k.ZB,{className:"text-sm font-medium",children:["Attempts (",eM.length,")"]})}),(0,a.jsx)(k.Wu,{children:eM.length>0?(0,a.jsx)("div",{className:"space-y-2",children:eM.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded border cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>eu(e),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.E,{className:V(e.outcome),variant:"secondary",children:e.outcome}),e.why&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.why})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.recordingUrl&&(0,a.jsx)(z.A,{className:"h-3 w-3 text-muted-foreground"}),e.transcript&&e.transcript.length>0&&(0,a.jsx)(E.A,{className:"h-3 w-3 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:B(e.timestamp)}),(0,a.jsx)(I.A,{className:"h-4 w-4 text-muted-foreground"})]})]},e.id))}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center py-2",children:"No attempts yet"})})]})]})})]})})})]})})}},4679:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>x,Es:()=>u,L3:()=>p,c7:()=>h,lG:()=>i,rr:()=>j,zM:()=>d});var a=t(5155),n=t(2115),l=t(9511),r=t(5229),c=t(5016);let i=l.bL,d=l.l9,o=l.ZL;l.bm;let m=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.hJ,{ref:s,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n})});m.displayName=l.hJ.displayName;let x=n.forwardRef((e,s)=>{let{className:t,children:n,...i}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(l.UC,{ref:s,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[n,(0,a.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(r.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=l.UC.displayName;let h=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};h.displayName="DialogHeader";let u=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};u.displayName="DialogFooter";let p=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.hE,{ref:s,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",t),...n})});p.displayName=l.hE.displayName;let j=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.VY,{ref:s,className:(0,c.cn)("text-sm text-muted-foreground",t),...n})});j.displayName=l.VY.displayName},5623:(e,s,t)=>{Promise.resolve().then(t.bind(t,4182))},7001:(e,s,t)=>{"use strict";t.d(s,{T:()=>r});var a=t(5155),n=t(2115),l=t(5016);let r=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});r.displayName="Textarea"},7346:(e,s,t)=>{"use strict";t.d(s,{F:()=>c});var a=t(5155),n=t(2115),l=t(9034),r=t(5016);let c=n.forwardRef((e,s)=>{let{className:t,children:n,...c}=e;return(0,a.jsxs)(l.bL,{ref:s,className:(0,r.cn)("relative overflow-hidden",t),...c,children:[(0,a.jsx)(l.LM,{className:"h-full w-full rounded-[inherit]",children:n}),(0,a.jsx)(i,{}),(0,a.jsx)(l.OK,{})]})});c.displayName=l.bL.displayName;let i=n.forwardRef((e,s)=>{let{className:t,orientation:n="vertical",...c}=e;return(0,a.jsx)(l.VM,{ref:s,orientation:n,className:(0,r.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...c,children:(0,a.jsx)(l.lr,{className:"relative flex-1 rounded-full bg-border"})})});i.displayName=l.VM.displayName}},e=>{e.O(0,[142,728,524,34,712,745,63,441,255,358],()=>e(e.s=5623)),_N_E=e.O()}]);